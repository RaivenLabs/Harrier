<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Services Platform</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">


    <style>
:root {
    --royal-blue: #0A2351;
    --ivory: #FFFFF0;
    --light-ivory: #FFFFFA;
    --hover-blue: #153672;
    --sidebar-dark: #1f2125;
    --light-gray: #F5F5F5;
    --dark-gray: #333333;
    --teal: #006D77;
    --light-blue: rgba(10, 35, 81, 0.1);
    --cyan: rgb(21, 235, 235);
    --royal-blue: #0A2351;
                           
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

body {
    background-color: var(--light-ivory);
    display: flex;
    width: 100%;
    min-height: 100vh;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;

}

/* Layout Styles */
.layout {
    display: flex;
    height: 100vh;
    width: 100%;
}

/* Sidebar Styles */
.sidebar {
    width: 250px;
    height: 100vh;
    background-color: #132440;
    color: var(--ivory);
    padding: 2rem;
    overflow-y: auto;
    z-index: 1000;
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
}

.logo-container {
    margin-bottom: 1.5rem;
}

.logo {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--cyan);
    margin-bottom: 0.5rem;
}

.logo-separator {
    width: 100%;
    height: 2px;
    background-color: rgb(229, 241, 241);
    margin-top: 5px;
    margin-bottom: 15px;
    box-shadow: 0 0 8px rgb(229, 241, 241);
}

.logo-subtitle {
    font-size: 0.85rem;
    color: #a0a0a0;
    font-style: italic;
    padding-left: 2px;
}

/* Menu Items */
.menu-item {
    padding: 0.8rem 1rem;
    margin-bottom: 0.5rem;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 12px;
}

.menu-item:hover {
    background-color: rgb(74, 73, 73);
}

.menu-item svg {
    width: 20px;
    height: 20px;
}

.menu-item.has-submenu {
    position: relative;
}

.menu-item.has-submenu::after {
    content: '▼';
    position: absolute;
    right: 1rem;
    font-size: 0.8em;
    transition: transform 0.3s;
}

.menu-item.has-submenu.active::after {
    transform: rotate(180deg);
}

/* Submenu Styles */
.submenu {
    height: 0;
    overflow: hidden;
    transition: height 0.3s ease;
    margin-left: 2.5rem;
}

.submenu .menu-item {
    padding: 0.6rem 1rem;
    font-size: 0.95em;
    opacity: 0.9;
}

.submenu.active {
    height: auto;
}

.submenu .menu-item:hover {
    background-color: rgb(74, 73, 73);
}

/* Main Content Area */
.main-content {
    position: relative;
    padding: 20px;
    overflow-x: hidden;
    background-color: var(--ivory);
    flex-grow: 1;
    width: calc(100% - 250px);
    min-width: 0;
}

/* Standard Modal Styles (for import modal etc.) */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    align-items: center;
    justify-content: center;
    z-index: 1200;
}

.modal.active {
    display: flex;
}

.modal .modal-content {
    background-color: var(--ivory);
    padding: 2rem;
    border-radius: 10px;
    width: 90%;
    max-width: 500px;
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid rgba(21, 235, 235, 0.2);
    box-shadow: 0 4px 20px rgba(10, 35, 81, 0.1);
}

/* Dashboard Modal Specific Styles */
.dashboard-modal {
    display: none;
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
    background-color: var(--ivory);
    z-index: 1100;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-left: 250px;
}

.dashboard-modal.active {
    display: block;
}

.dashboard-modal .modal-content {
    height: 100%;
    width: 100%;
    padding: 1.5rem;
    position: relative;
    display: flex;
    flex-direction: column;
    max-width: none;
    max-height: none;
    border: none;
}

.dashboard-modal .panel-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--royal-blue);
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--royal-blue);
}

.dashboard-modal .panel-content {
    flex-grow: 1;
    overflow: auto;
}

.dashboard-modal .close-button {
    position: absolute;
    right: 1.5rem;
    top: 1.5rem;
    font-size: 1.75rem;
    cursor: pointer;
    color: var(--royal-blue);
    opacity: 0.7;
    transition: all 0.3s ease;
    z-index: 1200;
}

.dashboard-modal .close-button:hover {
    opacity: 1;
    color: var(--cyan);
}

/* Table Styles */
.dashboard-modal .table-container {
    width: 100%;
    overflow-x: auto;
    background-color: var(--ivory);
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.dashboard-modal .data-table {
    width: 100%;
    min-width: 1200px;
    border-collapse: collapse;
}

.dashboard-modal .data-table th {
    background-color: var(--royal-blue);
    color: white;
    padding: 1rem;
    text-align: left;
    font-weight: 600;
}

.dashboard-modal .data-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #eee;
    color: #333;
}

.dashboard-modal .data-table tbody tr:hover {
    background-color: var(--light-ivory);
}

/* Button Styles */
.btn {
    min-width: 120px;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-primary {
    background-color: var(--royal-blue);
    color: white;
    transition: background-color 0.2s;
}

.btn-primary:hover {
    background-color: var(--hover-blue);
}

.btn-secondary {
    background-color: #e0e0e0;
    color: #333;
}

/* Dashboard Actions */
.dashboard-modal .dashboard-actions {
    padding: 1rem 0;
    display: flex;
    justify-content: flex-start;
    gap: 1rem;
    margin-top: auto;
    border-top: 1px solid #eee;
}

.import-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.import-button svg {
    stroke: currentColor;
}

/* Toast Notification */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 1rem;
    background-color: #333;
    color: white;
    border-radius: 4px;
    display: none;
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Active States */
.menu-item.current-active {
    background-color: rgb(74, 73, 73);
    border-left: 4px solid var(--cyan);
}

.submenu .menu-item.current-active {
    background-color: rgb(74, 73, 73);
    border-left: 4px solid var(--cyan);
}

/* Import Modal Specific Styles */
.file-upload-container {
    padding: 1rem;
}

.file-upload-area {
    border: 2px dashed var(--royal-blue);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    background-color: var(--light-ivory);
    transition: all 0.3s ease;
    cursor: pointer;
}

.file-upload-area:hover {
    border-color: var(--cyan);
    background-color: rgba(21, 235, 235, 0.05);
}

.upload-icon {
    color: var(--royal-blue);
    margin-bottom: 1rem;
    opacity: 0.7;
}

.upload-text {
    font-size: 1.1rem;
    color: var(--royal-blue);
    margin-bottom: 0.5rem;
}

.upload-subtext {
    color: #666;
    margin-bottom: 1rem;
}

.hidden-file-input {
    display: none;
}

.upload-button {
    display: inline-block;
    background-color: var(--royal-blue);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.upload-button:hover {
    background-color: var(--hover-blue);
}

/* Update existing modal styles */
.modal .modal-content {
    background-color: white;
    padding: 2.5rem;
    border-radius: 12px;
    width: 90%;
    max-width: 600px;  /* Slightly wider for better proportions */
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
}

.modal .modal-content h2 {
    color: var(--royal-blue);
    margin-bottom: 2rem;
    font-size: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--royal-blue);
}
.file-upload-area.highlight {
    border-color: var(--cyan);
    background-color: rgba(21, 235, 235, 0.1);
}
.demo-data-section {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid #eee;
    text-align: center;
}

.demo-text {
    color: #666;
    margin-bottom: 1rem;
    font-size: 0.9rem;
}
/* Add max-height to modal content with smooth scrolling */
.engineering-console .modal-content {
    background-color: var(--ivory);
    padding: 2rem;
    max-width: 1200px;
    max-height: 85vh;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--royal-blue) var(--ivory);
}

.engineering-console h2 {
    color: var(--royal-blue);
    font-size: 1.75rem;
    margin-bottom: 2rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid var(--royal-blue);
}

.engineering-console .program-groups {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin: 1.5rem 0;
}



.engineering-console .program-group:hover {
    background-color: rgba(19, 36, 64, 0.05);
    box-shadow: 0 4px 12px rgba(19, 36, 64, 0.08);
}

.engineering-console .group-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid rgba(19, 36, 64, 0.1);
}

.engineering-console .group-header svg {
    color: var(--royal-blue);
}

.engineering-console .group-header h3 {
    color: var(--royal-blue);
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
}

/* Updated styles for compact tiles */
.engineering-console .program-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* Reduced from 180px to 100px */
    gap: 0.75rem;
    padding: 0.5rem;
}

.engineering-console .program-tile {
    position: relative;
    cursor: pointer;
}

.engineering-console .program-tile input[type="radio"] {
    position: absolute;
    opacity: 0;
}

.engineering-console .tile-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem;
    height: 100px; /* Fixed height for square-ish tiles */
    width: 100px; /* Fixed width */
    background-color: var(--light-ivory);
    border: 1px solid rgba(19, 36, 64, 0.15);
    border-radius: 8px;
    transition: all 0.2s ease-in-out;
}

.engineering-console .program-tile:hover .tile-content {
    background-color: white;
    border-color: var(--royal-blue);
    transform: translateY(-2px);
}

.engineering-console .program-tile input[type="radio"]:checked + .tile-content {
    background-color: white;
    border-color: var(--royal-blue);
    box-shadow: 0 2px 8px rgba(19, 36, 64, 0.15);
}

.engineering-console .tile-content svg {
    color: var(--royal-blue);
    width: 24px;
    height: 24px;
}

.engineering-console .tile-content span {
    font-size: 0.8rem;
    font-weight: 500;
    text-align: center;
    color: var(--royal-blue);
    line-height: 1.2;
    /* Cross-browser text truncation */
    overflow: hidden;
    width: 100%;
    max-height: 2.4em; /* line-height * number of lines */
    display: block;
    /* Fallback for non-WebKit browsers */
    text-overflow: ellipsis;
    white-space: normal;
    /* WebKit-specific handling */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
}

.engineering-console .modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(19, 36, 64, 0.1);
}

.engineering-console .btn-primary {
    background-color: var(--royal-blue);
    color: white;
}

.engineering-console .btn-primary:hover {
    background-color: var(--hover-blue);
}

.engineering-console .btn-secondary {
    background-color: var(--light-ivory);
    color: var(--royal-blue);
    border: 1px solid var(--royal-blue);
}

.engineering-console .btn-secondary:hover {
    background-color: var(--ivory);
}

* Hover and selected states */
.engineering-console .program-tile:hover .tile-content {
    background-color: white;
    border-color: var(--royal-blue);
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(19, 36, 64, 0.1);
}
.engineering-console .program-tile input[type="radio"]:checked + .tile-content {
    background-color: rgba(19, 36, 64, 0.05);
    border-color: var(--royal-blue);
    box-shadow: 0 2px 8px rgba(19, 36, 64, 0.15);
}

.engineering-console .program-group {
    background-color: rgba(19, 36, 64, 0.03);
    border: 1px solid rgba(19, 36, 64, 0.1);
    border-radius: 10px;
    padding: 1.25rem;
    margin-bottom: 1rem;
    transition: all 0.2s ease;
}


.engineering-console .group-header {
    margin-bottom: 1rem;
}

/* Add hover state for the entire group */
.engineering-console .program-group:hover {
    box-shadow: 0 2px 8px rgba(19, 36, 64, 0.08);
}

/* Add focus states for accessibility */
.engineering-console .program-tile input[type="radio"]:focus + .tile-content {
    outline: 2px solid var(--royal-blue);
    outline-offset: 2px;
}

/* Scrollbar styling for webkit browsers */
.engineering-console .modal-content::-webkit-scrollbar {
    width: 8px;
}

.engineering-console .modal-content::-webkit-scrollbar-track {
    background: var(--ivory);
}

.engineering-console .modal-content::-webkit-scrollbar-thumb {
    background-color: var(--royal-blue);
    border-radius: 4px;
    border: 2px solid var(--ivory);
}

 .tour-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .tour-header {
            background-color: var(--corporate-blue);
            color: var(--ivory);
            padding: 3rem 1rem;
            text-align: center;
        }

        .tour-header h1 {
            font-size: 2.8rem;
            margin: 0 auto 1rem;
            font-weight: 600;
        }

        .tour-header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .principle-section {
            background: white;
            padding: 4rem 1rem;
        }

        .principle-title {
            text-align: center;
            color: var(--corporate-blue);
            font-size: 2rem;
            margin-bottom: 3rem;
        }

        .principle-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .principle-box {
            background: var(--light-gray);
            padding: 2rem;
            border-radius: 8px;
            position: relative;
        }

        .arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 1rem;
            height: 100px;
        }

        .arrow-right {
            position: relative;
            width: 2in; /* Set to 2 inches */
            height: 15px; /* Set thickness to 15px */
            background-color: var(--teal);
        }

        .arrow-right::after {
            content: '';
            position: absolute;
            right: -15px;
            top: -12.5px;
            width: 0;
            height: 0;
            border-left: 25px solid var(--teal);
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
        }

        .arrow-text {
            font-size: 1rem;
            color: var(--teal);
            font-weight: 500;
            margin-top: 1.5rem;
        }

        .outcome-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .outcome-list li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .outcome-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--teal);
            font-size: 1.2rem;
        }

        .lifecycle-section {
            background: var(--ivory);
            padding: 4rem 1rem;
        }

        .lifecycle-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr); /* Creates exactly 7 equal columns */
    gap: 1rem;
    text-align: center;
    overflow-x: auto; /* Allows horizontal scrolling if needed */
    padding-bottom: 1rem; /* Space for potential scrollbar */
}

        .lifecycle-card {
            background: white;
            border: 1px solid var(--light-blue);
            border-radius: 8px;
            padding: 1rem;
            min-width: 150px;
            transition: transform 0.3s ease;
        }

        .lifecycle-card:hover {
            transform: translateY(-5px);
        }

        .lifecycle-card h3 {
            color: var(--corporate-blue);
            font-size: 1.2rem;
            margin-bottom: .5rem;
        }
        .lifecycle-card p {
    font-size: 0.9rem; /* Slightly smaller font */
    margin: 0;
}

        .tour-footer {
            background: var(--corporate-blue);
            color: var(--ivory);
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
        }

        .tour-footer p {
            margin: 0;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .principle-container {
                grid-template-columns: 1fr;
            }
            
            .arrow-container {
                transform: rotate(90deg);
                margin: 2rem 0;
            }

            .arrow-text {
                transform: rotate(-90deg);
                margin-top: 1rem;
            }

            .arrow-right {
                width: 1.5in; /* Slightly shorter on mobile */
            }
        }
        .finder-section {
    background: var(--light-gray);
    padding: 4rem 1rem;
    margin-top: 3rem;
}

.finder-title {
    text-align: center;
    color: var(--corporate-blue);
    font-size: 2rem;
    margin-bottom: 2rem;
}

.finder-table {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    border-collapse: collapse;
    background: white;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    border-radius: 8px;
    overflow: hidden;
}

.finder-table th,
.finder-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--light-blue);
    line-height: 1.4;
}

.finder-table th {
    background: var(--corporate-blue);
    color: var(--ivory);
    font-weight: 600;
    white-space: nowrap;
}

.finder-table tr:last-child td {
    border-bottom: none;
}

.finder-table tr:hover {
    background: var(--light-blue);
}

/* Add responsive handling for smaller screens */
@media (max-width: 768px) {
    .finder-table {
        display: block;
        overflow-x: auto;
    }
    
    .finder-table th,
    .finder-table td {
        white-space: nowrap;
    }
}
.tour-wrapper {
            --tour-corporate-blue: #0A2351;
            --tour-ivory: #FFFFF0;
            --tour-light-gray: #F5F5F5;
            --tour-dark-gray: #333333;
            --tour-teal: #006D77;
            --tour-light-blue: rgba(10, 35, 81, 0.1);
        }
        
        .tour-wrapper {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--tour-ivory);
            color: var(--tour-dark-gray);
            line-height: 1.6;
        }

        .tour-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .tour-header {
            background-color: var(--tour-corporate-blue);
            color: var(--tour-ivory);
            padding: 3rem 1rem;
            text-align: center;
        }

        .tour-header h1 {
            font-size: 2.8rem;
            margin: 0 auto 1rem;
            font-weight: 600;
        }

        .tour-header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .tour-principle-section {
            background: white;
            padding: 4rem 1rem;
        }

        .tour-principle-title {
            text-align: center;
            color: var(--tour-corporate-blue);
            font-size: 2rem;
            margin-bottom: 3rem;
        }

        .tour-principle-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 2rem;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .tour-principle-box {
            background: var(--tour-light-gray);
            padding: 2rem;
            border-radius: 8px;
            position: relative;
        }

        .tour-arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 1rem;
            height: 100px;
        }

        .tour-arrow-right {
            position: relative;
            width: 2in;
            height: 15px;
            background-color: var(--tour-teal);
        }

        .tour-arrow-right::after {
            content: '';
            position: absolute;
            right: -15px;
            top: -12.5px;
            width: 0;
            height: 0;
            border-left: 25px solid var(--tour-teal);
            border-top: 20px solid transparent;
            border-bottom: 20px solid transparent;
        }

        .tour-arrow-text {
            font-size: 1rem;
            color: var(--tour-teal);
            font-weight: 500;
            margin-top: 1.5rem;
        }

        .tour-outcome-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .tour-outcome-list li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .tour-outcome-list li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--tour-teal);
            font-size: 1.2rem;
        }

        .tour-lifecycle-section {
            background: var(--tour-ivory);
            padding: 4rem 1rem;
        }

        .tour-lifecycle-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1rem;
            text-align: center;
            overflow-x: auto;
            padding-bottom: 1rem;
        }

        .tour-lifecycle-card {
            background: white;
            border: 1px solid var(--tour-light-blue);
            border-radius: 8px;
            padding: 1rem;
            min-width: 150px;
            transition: transform 0.3s ease;
        }

        .tour-lifecycle-card:hover {
            transform: translateY(-5px);
        }

        .tour-lifecycle-card h3 {
            color: var(--tour-corporate-blue);
            font-size: 1.2rem;
            margin-bottom: .5rem;
        }

        .tour-lifecycle-card p {
            font-size: 0.9rem;
            margin: 0;
        }

        .tour-finder-section {
            background: var(--tour-light-gray);
            padding: 4rem 1rem;
            margin-top: 3rem;
        }

        .tour-finder-title {
            text-align: center;
            color: var(--tour-corporate-blue);
            font-size: 2rem;
            margin-bottom: 2rem;
        }

        .tour-finder-table {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .tour-finder-table th,
        .tour-finder-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--tour-light-blue);
            line-height: 1.4;
        }

        .tour-finder-table th {
            background: var(--tour-corporate-blue);
            color: var(--tour-ivory);
            font-weight: 600;
            white-space: nowrap;
        }

        .tour-finder-table tr:last-child td {
            border-bottom: none;
        }

        .tour-finder-table tr:hover {
            background: var(--tour-light-blue);
        }

        .tour-footer {
            background: var(--tour-corporate-blue);
            color: var(--tour-ivory);
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            .tour-principle-container {
                grid-template-columns: 1fr;
            }
            
            .tour-arrow-container {
                transform: rotate(90deg);
                margin: 2rem 0;
            }

            .tour-arrow-text {
                transform: rotate(-90deg);
                margin-top: 1rem;
            }

            .tour-arrow-right {
                width: 1.5in;
            }

            .tour-finder-table {
                display: block;
                overflow-x: auto;
            }
            
            .tour-finder-table th,
            .tour-finder-table td {
                white-space: nowrap;
            }
        }
                              
                        .operations-command {
                            padding: 1.5rem;
                            background-color: var(--ivory);
                            min-height: 100%;
                        }
                
                        .row {
                            display: flex;
                            gap: 1.5rem;
                            margin-bottom: 1.5rem;
                        }
                
                        .card {
                            background: white;
                            border-radius: 8px;
                            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                            flex: 1;
                        }
                
                        .card-header {
                            padding: 1rem;
                            border-bottom: 1px solid var(--gray-200);
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                        }
                
                        .card-title {
                            color: var(--royal-blue);
                            font-size: 1.25rem;
                            font-weight: 600;
                            margin: 0;
                        }
                
                        .card-content {
                            padding: 1rem;
                        }
                
                        /* Active Projects Styles */
                        .project-item {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 1rem;
                            background: var(--light-ivory);
                            border-radius: 6px;
                            margin-bottom: 0.75rem;
                        }
                
                        .project-info h4 {
                            margin: 0;
                            color: var(--royal-blue);
                        }
                
                        .project-status {
                            font-size: 0.875rem;
                            color: var(--teal);
                        }
                
                        .progress-bar {
                            width: 100px;
                            height: 8px;
                            background: var(--gray-200);
                            border-radius: 4px;
                            overflow: hidden;
                        }
                
                        .progress-fill {
                            height: 100%;
                            background: var(--teal);
                            transition: width 0.3s ease;
                        }
                
                        /* Metrics Grid */
                        .metrics-grid {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 1rem;
                        }
                
                        .metric-card {
                            background: var(--light-ivory);
                            padding: 1rem;
                            border-radius: 6px;
                        }
                
                        .metric-header {
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                            color: var(--royal-blue);
                            font-size: 0.875rem;
                        }
                
                        .metric-value {
                            font-size: 1.5rem;
                            font-weight: bold;
                            color: var(--royal-blue);
                            margin-top: 0.5rem;
                        }
                
                        .metric-trend {
                            font-size: 0.875rem;
                        }
                
                        .trend-up { color: #10B981; }
                        .trend-down { color: #EF4444; }
                
                        /* Flags Section */
                        .flag-item {
                            padding: 1rem;
                            background: #FEE2E2;
                            border-radius: 6px;
                            margin-bottom: 0.75rem;
                        }
                
                        .flag-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        }
                
                        .priority-badge {
                            padding: 0.25rem 0.5rem;
                            border-radius: 4px;
                            font-size: 0.75rem;
                            font-weight: 500;
                            background: #DC2626;
                            color: white;
                        }
                
                        /* Alerts Section */
                        .alerts-container {
                            max-height: 300px;
                            overflow-y: auto;
                        }
                
                        .alert-item {
                            padding: 1rem;
                            background: #FEF3C7;
                            border-radius: 6px;
                            margin-bottom: 0.75rem;
                        }
                
                        .alert-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 0.5rem;
                        }
                
                        .alert-badge {
                            padding: 0.25rem 0.5rem;
                            border-radius: 4px;
                            font-size: 0.75rem;
                            background: #F59E0B;
                            color: white;
                        }
                
                        /* System Requests Section */
                        .request-container {
                            text-align: center;
                            padding: 2rem;
                            background: var(--light-ivory);
                            border-radius: 6px;
                        }
                
                        .request-button {
                            padding: 0.75rem 1.5rem;
                            background: var(--royal-blue);
                            color: white;
                            border: none;
                            border-radius: 6px;
                            cursor: pointer;
                            transition: background-color 0.2s;
                        }
                
                        .request-button:hover {
                            background: var(--hover-blue);
                        }



 


    </style>
</head>

<body>
    <!-- SVG Definitions -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="icon-home" viewBox="0 0 24 24">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M9 22V12h6v10" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        
        <symbol id="icon-command" viewBox="0 0 24 24">
            <path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        
        <symbol id="icon-operations" viewBox="0 0 24 24">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        
        <symbol id="icon-projects" viewBox="0 0 24 24">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>
        
        <symbol id="icon-config" viewBox="0 0 24 24">
            <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>

        <symbol id="icon-concierge" viewBox="0 0 24 24">
            <!-- White Glove -->
            <path d="M6 15c0-3 2.5-5.5 6-5.5s6 2.5 6 5.5V19c0 1.1-.9 2-2 2H8c-1.1 0-2-.9-2-2v-4z" 
                  fill="none" 
                  stroke="currentColor" 
                  stroke-width="2"
                  stroke-linecap="round"/>
            <!-- Wrist/Cuff Detail -->
            <path d="M6 15h12" 
                  stroke="currentColor" 
                  stroke-width="2"
                  stroke-linecap="round"/>
            <!-- Thumb -->
            <path d="M8 14v-2c0-1.1.9-2 2-2h0" 
                  fill="none" 
                  stroke="currentColor" 
                  stroke-width="2"
                  stroke-linecap="round"/>
            <!-- Fingertips -->
            <path d="M10 9.5v-2M12 9v-2.5M14 9.5v-2M16 10.5v-1.5" 
                  stroke="currentColor" 
                  stroke-width="2"
                  stroke-linecap="round"/>
            <!-- Optional: Bell on top -->
            <path d="M12 7.5V5M10.5 5h3" 
                  stroke="currentColor" 
                  stroke-width="2"
                  stroke-linecap="round"/>
            <circle cx="12" cy="4" r="1" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2"/>
        </symbol>
        
        <symbol id="icon-settings" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" fill="none" stroke="currentColor" stroke-width="2"/>
        </symbol>  
    </svg>

        <div class="layout">
            <!-- Sidebar Navigation -->
            <div class="sidebar" id="sidebar">
                <div class="logo-container">
                    <div class="logo">Transaction Services Platform</div>
                    <div class="logo-separator"></div>
                </div>
                <nav>
                    
                    <div class="menu-item" data-section="concierge">
                        <svg><use href="#icon-concierge"/></svg>
                        Concierge
                    </div>

                    
                    
                    <div class="menu-item" data-section="platformtour">
                        <svg><use href="#icon-home"/></svg>
                        Platform Guide
                    </div>



                    <div class="menu-item" data-section="operationscommand">
                        <svg><use href="#icon-command"/></svg>
                        Transaction Center
                    </div>
                    <div class="menu-item has-submenu" data-section="operations">
                        <svg><use href="#icon-operations"/></svg>
                        Transaction Operations
                    </div>
                    <div class="submenu">
                        <div class="menu-item" data-section="dashboard">Transaction Dashboard</div>
                        <div class="menu-item" data-section="engineering">Transaction Engineering</div>
                        <div class="menu-item" data-section="analytics">Transaction Analytics</div>
                        <div class="menu-item" data-section="families">Transaction Families</div>
                        <div class="menu-item" data-section="configuration">Transaction Configuration</div>
                        <div class="menu-item" data-section="configuration">Transaction Sandbox</div>
                        <div class="menu-item" data-section="configuration">Engagement Optimization</div>
                    </div>
                    <div class="menu-item" data-section="projects">
                        <svg><use href="#icon-projects"/></svg>
                        My Projects
                    </div>

                    <div class="menu-item" data-section="settings">
                        <svg><use href="#icon-settings"/></svg>
                        Settings
                    </div>


                    <br><br><br>
                    <div>
                        <p>Powered by Tangible Intelligence</p>
                    </div>
                </nav>
            </div>
    
            <!-- Main Content -->
            <div class="main-content">
                <h1>Testing</h1>
            </div>
        </div>


          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="4" y="4" width="16" height="16" rx="2"/>
                                        <path d="M9 9h6v6H9z"/>
                                    </svg>
                                    <span>Hardware</span>
                                </div>
                            </label>
        
                            <label class="program-tile">
                                <input type="radio" name="program" value="network">
                                <div class="tile-content">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 2h6v3h-6zM5 5h14v4H5zM3 9h18v4H3zM5 13h14v4H5zM9 17h6v3h-6z"/>
                                    </svg>
                                    <span>Network</span>
                                </div>
                            </label>
        
                            <label class="program-tile">
                                <input type="radio" name="program" value="evaluation">
                                <div class="tile-content">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <path d="M9 10h6M9 14h6M9 18h6"/>
                                    </svg>
                                    <span>Evaluation</span>
                                </div>
                            </label>
                            <div id="engineeringConsole" class="modal engineering-console">
                                <div class="modal-content">
                                    <span class="close-button" onclick="modalManager.close('engineeringConsole')">&times;</span>
                                    <h2>Transaction Programs</h2>
                                    
                                    <div class="program-groups">
                                        <!-- Sourcing Transactions -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M20 7h-7m7 10h-7M7 7h-2M7 17h-2M8 5v4M8 15v4M14 5v4m0 6v4"/>
                                                </svg>
                                                <h3>Sourcing Transactions</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="purchase-orders">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M9 17h6M9 12h6M9 7h6"/>
                                                        </svg>
                                                        <span>Purchase Orders</span>
                                                    </div>
                                                </label>
                                                                                                
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="saas">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 1 1 2.5 8.242"/>
                                                        </svg>
                                                        <span>SaaS</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="msa">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                                                            <path d="M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"/>
                                                        </svg>
                                                        <span>MSA</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="nda">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M12 17v-2M9 9h6M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18z"/>
                                                        </svg>
                                                        <span>NDA</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="consulting">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                                            <circle cx="9" cy="7" r="4"/>
                                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                                        </svg>
                                                        <span>Consulting</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="hardware">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <rect x="4" y="4" width="16" height="16" rx="2"/>
                                                            <path d="M9 9h6v6H9z"/>
                                                        </svg>
                                                        <span>Hardware</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="network">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M9 2h6v3h-6zM5 5h14v4H5zM3 9h18v4H3zM5 13h14v4H5zM9 17h6v3h-6z"/>
                                                        </svg>
                                                        <span>Network</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="evaluation">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                                            <path d="M9 10h6M9 14h6M9 18h6"/>
                                                        </svg>
                                                        <span>Evaluation</span>
                                                    </div>
                                                </label>

                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="software">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/>
                                                        </svg>
                                                        <span>Software</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                        <!-- Real Estate Transactions -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                                    <polyline points="9 22 9 12 15 12 15 22"/>
                                                </svg>
                                                <h3>Real Estate Transactions</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="retail-lease">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M3 3h18v18H3z"/>
                                                            <path d="M3 9h18"/>
                                                            <path d="M15 3v18"/>
                                                        </svg>
                                                        <span>Retail Lease</span>
                                                    </div>
                                                </label>
                                                
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="commercial-lease">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <rect x="4" y="4" width="16" height="16" rx="2"/>
                                                            <path d="M4 9h16"/>
                                                            <path d="M12 4v16"/>
                                                        </svg>
                                                        <span>Commercial Lease</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="property-purchase">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                                            <path d="M2 17l10 5 10-5"/>
                                                            <path d="M2 12l10 5 10-5"/>
                                                        </svg>
                                                        <span>Property Purchase</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                        <!-- Corporate Finance -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                                </svg>
                                                <h3>Corporate Finance</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="venture-capital">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M2 16l4-4 4 4 4-4 4 4 4-4"/>
                                                        </svg>
                                                        <span>Venture Capital</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="equity-investment">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <circle cx="12" cy="12" r="10"/>
                                                            <path d="M12 2v20M2 12h20"/>
                                                        </svg>
                                                        <span>Equity Investment</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="debt-financing">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M8 6h12M4 6h2M8 12h12M4 12h2M8 18h12M4 18h2"/>
                                                        </svg>
                                                        <span>Debt Financing</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                        <!-- M&A Transactions -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M16 3h5v5M21 3l-7 7M3 21h5v-5M3 21l7-7"/>
                                                </svg>
                                                <h3>M&A Transactions</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="stock-purchase">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M6 2h12v6H6zM6 16h12v6H6z"/>
                                                            <path d="M12 8v8"/>
                                                        </svg>
                                                        <span>Stock Purchase</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="asset-purchase">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <circle cx="12" cy="12" r="10"/>
                                                            <path d="M12 6v12M6 12h12"/>
                                                        </svg>
                                                        <span>Asset Purchase</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="merger">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M8 2h8M12 2v20M2 12h20"/>
                                                        </svg>
                                                        <span>Merger</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                        <!-- HR & Employment -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                                    <circle cx="9" cy="7" r="4"/>
                                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                                </svg>
                                                <h3>HR & Employment</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="employment">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
                                                            <path d="M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"/>
                                                        </svg>
                                                        <span>Employment</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="stock-options">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M2 16l4-4 4 4 4-4 4 4 4-4"/>
                                                        </svg>
                                                        <span>Stock Options</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="benefits">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                                        </svg>
                                                        <span>Benefits</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                        <!-- IP & Technology -->
                                        <div class="program-group">
                                            <div class="group-header">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                    <path d="M12 2l10 6v8l-10 6-10-6V8l10-6z"/>
                                                </svg>
                                                <h3>IP & Technology</h3>
                                            </div>
                                            <div class="program-grid">
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="patent-license">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <circle cx="12" cy="12" r="10"/>
                                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                                                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                                                        </svg>
                                                        <span>Patent License</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="trademark-license">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <circle cx="12" cy="12" r="10"/>
                                                            <path d="M8 11h8"/>
                                                            <path d="M12 15V8"/>
                                                        </svg>
                                                        <span>Trademark License</span>
                                                    </div>
                                                </label>
                            
                                                <label class="program-tile">
                                                    <input type="radio" name="program" value="tech-transfer">
                                                    <div class="tile-content">
                                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                            <path d="M21 12h-4l-3 9L9 3l-3 9H2"/>
                                                        </svg>
                                                        <span>Tech Transfer</span>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                            
                                    </div>
                                    
                                    <div class="modal-buttons">
                                        <button class="btn btn-secondary" onclick="modalManager.close('engineeringConsole')">Cancel</button>
                                        <button class="btn btn-primary" onclick="launchProgram()">Launch Program</button>
                                    </div>
                                </div>
                            </div>


<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<!-- Import Data Modal -->
<div id="importModal" class="modal"> 
    <div class="modal-content">
        <span class="close-button" onclick="modalManager.close('importModal')">&times;</span>
        <h2>Import Transaction Data</h2>
        <div class="import-form">
            <div class="file-upload-container">
                <div class="file-upload-area">
                    <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <p class="upload-text">Drag and drop your JSON file here</p>
                    <p class="upload-subtext">or</p>
                    <input type="file"
                           id="fileInput"
                           accept=".json"
                           class="hidden-file-input"
                           onchange="handleFileSelect(event)">
                    <label for="fileInput" class="btn btn-primary upload-button">
                        Browse Files
                    </label>
                </div>

                <div class="demo-data-section">
                    <p class="demo-text">First time here? Try our demo data:</p>
                    <button class="btn btn-secondary" onclick="loadDemoData()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                            <line x1="12" y1="22.08" x2="12" y2="12"/>
                        </svg>
                        Load Sample Data
                    </button>
                </div>
            </div>
        </div>
        <div class="modal-buttons">
            <button class="btn btn-secondary" onclick="modalManager.close('importModal')">Cancel</button>
        </div>
    </div>
</div>




  <!-- Transactions Dashboard Modal -->
<div id="transactionDashboard" class="dashboard-modal">
    <div class="modal-content">
        <span class="close-button" onclick="modalManager.close('transactionDashboard')">&times;</span>
        <div class="dashboard-panel">
            <div class="panel-title">
                Transaction Dashboard
            </div>
            <div class="panel-content">
                <!-- Table Container -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Agreement ID</th>
                                <th>Title</th>
                                <th>Counterparty</th>
                                <th>Category</th>
                                <th>Role</th>
                                <th>Effective Date</th>
                                <th>End Date</th>
                                <th>Region</th>
                                <th>Status</th>
                                <th>CLM Reference</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="agreementTableBody">
                            <!-- Table content will be populated by backend -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="dashboard-actions">
                <button class="btn btn-primary import-button" onclick="modalManager.open('importModal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Import Transaction Data
                </button>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="modalManager.close('transactionDashboard')">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Transaction Operations Command Modal -->
<div id="operationsCommand" class="dashboard-modal">  <!-- Changed id to match modalManager and class for consistency -->
    <div class="modal-content">
        <span class="close-button" onclick="modalManager.close('operationsCommand')">&times;</span>
        <div class="dashboard-panel">  <!-- Changed to dashboard-panel for consistency -->
            <div class="panel-title">
                Transaction Operations Command
            </div>
            <div class="panel-content">
                            
                    <div class="operations-command">
                        <!-- Row 1 -->
                        <div class="row">
                            <!-- Active Projects -->
                            <div class="card">
                                <div class="card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 3H3v18h18V3zM9 9h6M9 15h6M9 12h6"/>
                                    </svg>
                                    <h3 class="card-title">Active Projects</h3>
                                </div>
                                <div class="card-content" id="projectsContainer">
                                    <!-- Projects will be populated by JavaScript -->
                                </div>
                            </div>
                
                            <!-- Key Metrics -->
                            <div class="card">
                                <div class="card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                    </svg>
                                    <h3 class="card-title">Key Metrics</h3>
                                </div>
                                <div class="card-content">
                                    <div class="metrics-grid" id="metricsContainer">
                                        <!-- Metrics will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                
                        <!-- Row 2 -->
                        <div class="row">
                            <!-- Flags -->
                            <div class="card">
                                <div class="card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                                    </svg>
                                    <h3 class="card-title">Flags</h3>
                                </div>
                                <div class="card-content" id="flagsContainer">
                                    <!-- Flags will be populated by JavaScript -->
                                </div>
                            </div>
                
                            <!-- Alerts -->
                            <div class="card">
                                <div class="card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                        <line x1="12" y1="9" x2="12" y2="13"/>
                                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                                    </svg>
                                    <h3 class="card-title">Alerts</h3>
                                </div>
                                <div class="card-content">
                                    <div class="alerts-container" id="alertsContainer">
                                        <!-- Alerts will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                
                            <!-- System Requests -->
                            <div class="card">
                                <div class="card-header">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                    </svg>
                                    <h3 class="card-title">System Requests</h3>
                                </div>
                                <div class="card-content">
                                    <div class="request-container">
                                        <h4>Submit Feature Request</h4>
                                        <p>Help us improve the platform by suggesting new features</p>
                                        <button class="request-button" onclick="handleNewRequest()">New Request</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    
               
            </div>
            <div class="dashboard-actions">  <!-- Changed to dashboard-actions for consistency -->
                <button class="btn btn-primary import-button" onclick="modalManager.open('operationsCommandTestModal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Operations Testing
                </button>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="modalManager.close('operationsCommand')">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Platform Tour Modal-->
<div id="platformTour" class="dashboard-modal">  <!-- Changed id to match modalManager and class for consistency -->
    <div class="modal-content">
        <span class="close-button" onclick="modalManager.close('platformTour')">&times;</span>
        <div class="dashboard-panel">  <!-- Changed to dashboard-panel for consistency -->
            <div class="panel-title">
                Platform Tour
            </div>
            <div class="tour-wrapper">
                <header class="tour-header">
                    <div class="tour-container">
                        <h1>Transaction Services Platform</h1>
                        <p>Powered by Tangible Intelligence</p>
                        <p>From paper-based, siloed contracting processes to fluid Transactional Streams</p>
                    </div>
                </header>
        
                <section class="tour-principle-section">
                    <h2 class="tour-principle-title">Platform Architecture</h2>
                    <div class="tour-principle-container">
                        <div class="tour-principle-box">
                            <h1 style="font-style: italic;">The Critical Unlock resides at the Intersection of Computational Automation, Data Intelligence and Sector Expertise.  The pattern of the high volume transaction portfolio is the key.</h1>
                        </div>
                        
                        <div class="tour-arrow-container">
                            <div class="tour-arrow-right"></div>
                            <span class="tour-arrow-text">Driving</span>
                        </div>
                        
                        <div class="tour-principle-box">
                            <h3>Transactional Excellence</h3>
                            <ul class="tour-outcome-list">
                                <li>Accelerated speed to close</li>
                                <li>Quality of Deal Content</li>
                                <li>Low Friction</li>
                            </ul>
                        </div>
                    </div>
                </section>
        
                <section class="tour-lifecycle-section">
                    <div class="tour-container">
                        <h2 style="text-align: center; color: var(--tour-corporate-blue);">The Transaction Lifecycle</h2>
                        <div class="tour-lifecycle-grid">
                            <div class="tour-lifecycle-card">
                                <h3>1. Ideation</h3>
                                <p>Transforming concepts into actionable opportunities.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>2. Sourcing</h3>
                                <p>Defining goals and structure for seamless execution.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>3. Transacting</h3>
                                <p>Driving value with informed and strategic counterparty transacting.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>4. Packaging</h3>
                                <p>Securing approvals for close.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>5. Closing</h3>
                                <p>Signing the final package.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>6. Archiving</h3>
                                <p>Extracting metadata and putaway.</p>
                            </div>
                            <div class="tour-lifecycle-card">
                                <h3>7. Management</h3>
                                <p>Tracking counterparty performance and optimizing for sustained success.</p>
                            </div>
                        </div>
                    </div>
                </section>
        
                <section class="tour-finder-section">
                    <div class="tour-container">
                        <h2 class="tour-finder-title">Where Do I Find It?</h2>
                        <table class="tour-finder-table">
                            <thead>
                                <tr>
                                    <th>Mission</th>
                                    <th>Transaction Stage</th>
                                    <th>Platform Functionality</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Build a Transaction</td>
                                    <td>Sourcing and Transacting</td>
                                    <td>Engineering</td>
                                </tr>
                                <tr>
                                    <td>Look up Transaction Status</td>
                                    <td>Planning, Negotiation, Execution</td>
                                    <td>Transaction Dashboard</td>
                                </tr>
                                <tr>
                                    <td>Run my transactional system</td>
                                    <td>System Management</td>
                                    <td>Concierge</td>
                                </tr>
                                <tr>
                                    <td>Load Legacy Data</td>
                                    <td>Transacting</td>
                                    <td>Configuration</td>
                                </tr>
                                <tr>
                                    <td>Archive Transactions</td>
                                    <td>Archiving</td>
                                    <td>Concierge</td>
                                </tr>
                                <tr>
                                    <td>Analyze a Portfolio of Transactions</td>
                                    <td>Management</td>
                                    <td>Transaction Analysis</td>
                                </tr>
                                <tr>
                                    <td>Check system health</td>
                                    <td>System Management</td>
                                    <td>Transaction Ops Command</td>
                                </tr>
                                <tr>
                                    <td>Tune my Platform</td>
                                    <td>Platform Management</td>
                                    <td>Settings</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
        
                <footer class="tour-footer">
                    <div class="tour-container">
                        <p>© 2024 Transaction Services Platform. Built for serious business with an understated sense of humor.</p>
                    </div>
                </footer>
            </div>
            <div class="dashboard-actions">  <!-- Changed to dashboard-actions for consistency -->
                <button class="btn btn-primary import-button" onclick="modalManager.open('platformTourTestModal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Platform Tour Testing
                </button>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="modalManager.close('platformTour')">Close</button>
            </div>
        </div>
    </div>
</div>


 <!-- Concierge Modal
<div id="concierge" class="concierge-modal">
    <div class="modal-content">
        <span class="close-button" onclick="modalManager.close('concierge')">&times;</span>
        <div class="dashboard-panel">  
            <div class="panel-title">               
            -->





    </body>
    

    <script>
     document.addEventListener('DOMContentLoaded', () => {
    setupSidebar();
    setupFileUpload;
});   

// Sidebar Functions
function setupSidebar() {
    // Handle submenu toggles
    document.querySelectorAll('.menu-item.has-submenu').forEach(item => {
        item.addEventListener('click', function(e) {
            e.preventDefault();
            this.classList.toggle('active');
            const submenu = this.nextElementSibling;
            
            if (submenu.classList.contains('active')) {
                submenu.classList.remove('active');
                submenu.style.height = '0px';
            } else {
                submenu.classList.add('active');
                submenu.style.height = submenu.scrollHeight + 'px';
            }
        });
    });

    // Handle ALL menu items that don't have submenus
    document.querySelectorAll('.menu-item:not(.has-submenu)').forEach(item => {
        item.addEventListener('click', function(e) {
            e.stopPropagation();
            
            // Remove active state from all menu items
            document.querySelectorAll('.menu-item').forEach(mi => {
                mi.classList.remove('active');
            });
            
            // Add active state to clicked item
            this.classList.add('active');
            
            // Get and handle the section
            const section = this.getAttribute('data-section');
            handleSectionDisplay(section);
        });
    });
}



function handleFileSelect(event) {
    const file = event.target.files[0];
    if (!file) {
        showToast('No file selected', 'error');
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const data = JSON.parse(e.target.result);
            processImportData(data);
        } catch (error) {
            showToast('Error parsing JSON file', 'error');
            console.error('Error parsing JSON:', error);
        }
    };

    reader.onerror = function() {
        showToast('Error reading file', 'error');
    };

    reader.readAsText(file);
}

// Data Processing Functions
function processImportData(data) {
    try {
        const categoryCounters = {};
        const parentIdMapping = new Map();
        const amendmentCounters = new Map(); // Track amendment sequences per target
        const childCounters = new Map(); // Add this to track children per parent
        
        // First pass - process parent records and create ID mapping
        let processedData = data.map(agreement => {
            if (agreement.family_role === 'parent') {
                if (!categoryCounters[agreement.taxonomy_category]) {
                    categoryCounters[agreement.taxonomy_category] = 1;
                }
                const counter = categoryCounters[agreement.taxonomy_category]++;
                const sequenceNumber = String(counter).padStart(4, '0');
                const newParentId = `${agreement.taxonomy_category}${sequenceNumber}-P`;
                
                parentIdMapping.set(agreement.title, newParentId);
                
                return {
                    agreement_id: newParentId,
                    original_parent_id: agreement.parent_id,
                    ...agreement
                };
            }
            return agreement;
        });

        // Second pass - process child records
        processedData = processedData.map(agreement => {
            if (agreement.family_role === 'child') {
                const parentRecord = processedData.find(
                    parent => parent.family_role === 'parent' && 
                             parent.taxonomy_category === agreement.taxonomy_category &&
                             parent.counterparty === agreement.counterparty
                );
                
                const parentId = parentRecord ? parentRecord.agreement_id : agreement.parent_id;
                
                
                // Initialize or increment child counter for this parent
                if (!childCounters.has(parentId)) {
                    childCounters.set(parentId, 1);
                }
                const childNumber = childCounters.get(parentId);
                childCounters.set(parentId, childNumber + 1);
                
                // Include child number in agreement_id
                const agreement_id = `${agreement.taxonomy_category}C${childNumber}(${parentId})`;
                
                return {
                    agreement_id,
                    original_parent_id: agreement.parent_id,
                    ...agreement
                };
            }
            return agreement;
        });

        // Third pass - process amendments with sequential numbering per target
        const finalData = processedData.map(agreement => {
            if (agreement.family_role === 'amends') {
                const targetId = agreement.amends_id;
                
                // Get or initialize amendment counter for this target
                if (!amendmentCounters.has(targetId)) {
                    amendmentCounters.set(targetId, 1);
                }
                const amendmentNumber = amendmentCounters.get(targetId);
                amendmentCounters.set(targetId, amendmentNumber + 1);

                const agreement_id = `${agreement.taxonomy_category}.A${amendmentNumber}(${targetId})`;
                
                return {
                    agreement_id,
                    amends_id: targetId,
                    amendment_number: amendmentNumber,
                    ...agreement
                };
            }
            return agreement;
        });

        // Enhanced debug logging for amendments
        console.log('\nAmendatory Records:');
        finalData
            .filter(record => record.family_role === 'amends')
            .forEach(amends => {
                const targetRecord = finalData.find(r => r.agreement_id === amends.amends_id);
                console.log(`Amendment Title: ${amends.title}`);
                console.log(`Generated Amendment ID: ${amends.agreement_id}`);
                console.log(`Target Agreement: ${targetRecord ? targetRecord.title : 'Unknown'}`);
                console.log(`Target ID: ${amends.amends_id}`);
                console.log(`Amendment Number: ${amends.amendment_number}`);
                console.log('---');
            });

        // Group amendments by target for clarity
        console.log('\nAmendments Grouped by Target:');
        const groupedAmendments = new Map();
        finalData
            .filter(record => record.family_role === 'amends')
            .forEach(amendment => {
                if (!groupedAmendments.has(amendment.amends_id)) {
                    groupedAmendments.set(amendment.amends_id, []);
                }
                groupedAmendments.get(amendment.amends_id).push(amendment);
            });

        groupedAmendments.forEach((amendments, targetId) => {
            const targetRecord = finalData.find(r => r.agreement_id === targetId);
            console.log(`\nAmendments to: ${targetRecord ? targetRecord.title : targetId}`);
            amendments
                .sort((a, b) => a.amendment_number - b.amendment_number)
                .forEach(amendment => {
                    console.log(`  ${amendment.agreement_id} - ${amendment.title}`);
                });
        });

       

        // Debug logging
        console.log('\nGenerated Parent IDs:');
        console.log('Parent Title -> Generated ID');
        parentIdMapping.forEach((id, title) => {
            console.log(`${title} -> ${id}`);
        });
        
        console.log('\nChild Records with Parent Matching:');
        finalData
            .filter(record => record.family_role === 'child')
            .forEach(child => {
                const parentRecord = processedData.find(
                    parent => parent.family_role === 'parent' && 
                             parent.taxonomy_category === child.taxonomy_category &&
                             parent.counterparty === child.counterparty
                );
                
                console.log(`Child Title: ${child.title}`);
                console.log(`Parent Title: ${parentRecord ? parentRecord.title : 'Not Found'}`);
                console.log(`Generated Child ID: ${child.agreement_id}`);
                console.log('---');
            });

        console.log('\nNon-Parent Records:');
        finalData
            .filter(record => record.family_role === 'non_parent')
            .forEach(nonParent => {
                console.log(`Title: ${nonParent.title}`);
                console.log(`Generated ID: ${nonParent.agreement_id}`);
                console.log(`Category: ${nonParent.taxonomy_category}`);
                console.log('---');
            });

        console.log('\nAmendatory Records:');
        finalData
            .filter(record => record.family_role === 'amends')
            .forEach(amends => {
                console.log(`Title: ${amends.title}`);
                console.log(`Generated ID: ${amends.agreement_id}`);
                console.log(`Amends: ${amends.amends_id || amends.amends_title}`);
                console.log('---');
            });
        // Populate the HTML table with the final processed data
        populateAgreementTable(finalData);
        showToast('All records processed with IDs. Check console for results.');
        closeImportModal();
        
    } catch (error) {
        console.error('Error in data processing:', error);
        showToast('Error processing data', 'error');
    }
}
// Toast notification function
function showToast(message, type = 'info') {
    const toast = document.getElementById('toast');
    if (!toast) {
        console.error('Toast element not found');
        return;
    }
    
    toast.textContent = message;
    toast.style.backgroundColor = type === 'error' ? '#dc3545' : '#333';
    toast.style.display = 'block';
    
    setTimeout(() => {
        toast.style.display = 'none';
    }, 3000);
}

function populateAgreementTable(data) {
    const tableBody = document.getElementById('agreementTableBody');
    tableBody.innerHTML = ''; // Clear the table before populating

    data.forEach(agreement => {
        const row = document.createElement('tr');

        // Create table cells for each field
        row.innerHTML = `
            <td>${agreement.agreement_id || 'N/A'}</td>
            <td>${agreement.title || 'N/A'}</td>
            <td>${agreement.counterparty || 'N/A'}</td>
            <td>${agreement.taxonomy_category || 'N/A'}</td>
            <td>${agreement.family_role || 'N/A'}</td>
            <td>${agreement.effective_date || 'N/A'}</td>
            <td>${agreement.end_date || 'N/A'}</td>
            <td>${agreement.region || 'N/A'}</td>
            <td>${agreement.status || 'N/A'}</td>
            <td>${agreement.clm_reference || 'N/A'}</td>
            <td>
                <button class="view-details-btn" onclick="viewDetails('${agreement.agreement_id}')">View</button>
            </td>
        `;

        // Append the row to the table body
        tableBody.appendChild(row);
    });
}

// Example function to handle "View Details" button clicks
function viewDetails(agreementId) {
    alert(`Details for Agreement ID: ${agreementId}`);
}

// Call this function after processing data
// populateAgreementTable(finalData);





function setupFileUpload() {
    const dropArea = document.querySelector('.file-upload-area');
    const fileInput = document.getElementById('fileInput');

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight(e) {
        dropArea.classList.add('highlight');
    }

    function unhighlight(e) {
        dropArea.classList.remove('highlight');
    }

    dropArea.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        fileInput.files = files;
        handleFileSelect({ target: fileInput });
    }
}



function loadDemoData() {
    const demoData = [
        {
            "title": "Master Services Agreement - XYZ Corp",
            "counterparty": "XYZ Corporation",
            "taxonomy_category": "MSA",
            "family_role": "parent",
            "effective_date": "2023-01-01",
            "end_date": "2025-12-31",
            "region": "North America",
            "status": "Active",
            "clm_reference": "CLM-2023-001"
        },
        {
            "title": "Statement of Work 1 - XYZ Corp",
            "counterparty": "XYZ Corporation",
            "taxonomy_category": "MSA",
            "family_role": "child",
            "effective_date": "2023-02-01",
            "end_date": "2024-01-31",
            "region": "North America",
            "status": "Active",
            "clm_reference": "CLM-2023-002"
        },
        {
            "title": "Amendment 1 to MSA - XYZ Corp",
            "counterparty": "XYZ Corporation",
            "taxonomy_category": "MSA",
            "family_role": "amends",
            "amends_id": "MSA0001-P",
            "effective_date": "2023-06-01",
            "end_date": "2025-12-31",
            "region": "North America",
            "status": "Active",
            "clm_reference": "CLM-2023-003"
        }
        // Add more sample records as needed
    ];

    // Process the demo data using your existing function
    processImportData(demoData);
    
    // Close the import modal
    closeImportModal();
    
    // Show success message
    showToast('Demo data loaded successfully');
}

// Modal Management System
const modalManager = {
    // Registry of all modals and their functions
    modals: {
        'transactionDashboard': {
            open: function() {
                document.getElementById('transactionDashboard').classList.add('active');
            },
            close: function() {
                document.getElementById('transactionDashboard').classList.remove('active');
            }
        },
        'engineeringConsole': {
            open: function() {
                document.getElementById('engineeringConsole').classList.add('active');
            },
            close: function() {
                document.getElementById('engineeringConsole').classList.remove('active');
            }
        },
        'analyticsConsole': {
            open: function() {
                document.getElementById('analyticsConsole').classList.add('active');
            },
            close: function() {
                document.getElementById('analyticsConsole').classList.remove('active');
            }
        },
        'familiesConsole': {
            open: function() {
                document.getElementById('familiesConsole').classList.add('active');
            },
            close: function() {
                document.getElementById('familiesConsole').classList.remove('active');
            }
        },
        'configurationConsole': {
            open: function() {
                document.getElementById('configurationConsole').classList.add('active');
            },
            close: function() {
                document.getElementById('configurationConsole').classList.remove('active');
            }
        },
        'operationsCommand': {
            open: function() {
                document.getElementById('operationsCommand').classList.add('active');
            },
            close: function() {
                document.getElementById('operationsCommand').classList.remove('active');
            }
        },

        'platformTour': {
            open: function() {
                document.getElementById('platformTour').classList.add('active');
            },
            close: function() {
                document.getElementById('platfromTour').classList.remove('active');
            }
        },

        'importModal': {
            open: function() {
                document.getElementById('importModal').classList.add('active');
            },
            close: function() {
                document.getElementById('importModal').classList.remove('active');
                document.getElementById('fileInput').value = ''; // Clear file input on close
            }
        }
    },

    // Close all modals
    closeAll: function() {
        Object.keys(this.modals).forEach(modalId => {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        });
    },

    // Open a specific modal
    open: function(modalId) {
        if (!this.modals[modalId]) {
            console.error(`Modal ${modalId} not registered`);
            return;
        }
        // Close all other modals first unless it's the import modal
        if (modalId !== 'importModal') {
            this.closeAll();
        }
        this.modals[modalId].open();
    },

    // Close a specific modal
    close: function(modalId) {
        if (!this.modals[modalId]) {
            console.error(`Modal ${modalId} not registered`);
            return;
        }
        this.modals[modalId].close();
    },

    // Register a new modal
    register: function(modalId, openFn, closeFn) {
        this.modals[modalId] = {
            open: openFn,
            close: closeFn
        };
    }
};
function handleSectionDisplay(section) {
    console.log(`Handling section display for: ${section}`);

    // Remove active state from all menu items
    document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('current-active');
    });

    // Add active state to current menu item
    const currentMenuItem = document.querySelector(`.menu-item[data-section="${section}"]`);
    if (currentMenuItem) {
        currentMenuItem.classList.add('current-active');
    }

    try {
        switch(section) {
            case 'dashboard':
                modalManager.open('transactionDashboard');
                break;

            case 'engineering':
                modalManager.open('engineeringConsole');
                break;

            case 'analytics':
                modalManager.open('analyticsConsole');
                break;

            case 'families':
                modalManager.open('familiesConsole');
                break;

            case 'configuration':
                modalManager.open('configurationConsole');
                break;

            case 'operationscommand':
                modalManager.open('operationsCommand');
                break;

            case 'platformtour':
                modalManager.open('platformTour');
                break;

            case 'home':
                modalManager.closeAll();
                // For non-modal content, we still need to handle display
                document.querySelectorAll('.main-content > div[id$="Container"]').forEach(div => {
                    div.style.display = 'none';
                });
                document.getElementById('homeContainer').style.display = 'block';
                break;

            case 'projects':
                modalManager.closeAll();
                document.querySelectorAll('.main-content > div[id$="Container"]').forEach(div => {
                    div.style.display = 'none';
                });
                document.getElementById('projectsContainer').style.display = 'block';
                break;

            case 'settings':
                modalManager.closeAll();
                document.querySelectorAll('.main-content > div[id$="Container"]').forEach(div => {
                    div.style.display = 'none';
                });
                document.getElementById('settingsContainer').style.display = 'block';
                break;

            default:
                console.warn(`Section "${section}" not yet implemented`);
                showToast(`${section} functionality coming soon!`, 'info');
                break;
        }
    } catch (error) {
        console.error(`Error handling section display for ${section}:`, error);
        showToast('An error occurred while loading the section', 'error');
    }

    window.location.hash = section;
}

// Update your modal-related functions to use modalManager
function openImportModal() {
    modalManager.open('importModal');
}

function closeImportModal() {
    modalManager.close('importModal');
}

// Example of how to register a new modal later
function registerNewModal(modalId) {
    modalManager.register(modalId,
        function() { document.getElementById(modalId).classList.add('active'); },
        function() { document.getElementById(modalId).classList.remove('active'); }
    );
}
function launchProgram() {
    const selectedProgram = document.querySelector('input[name="program"]:checked');
    
    if (!selectedProgram) {
        showToast('Please select a program to launch', 'error');
        return;
    }

    // Handle program launch
    const programValue = selectedProgram.value;
    console.log(`Launching program: ${programValue}`);
    
    // Close the engineering modal
    modalManager.close('engineeringConsole');
    
    // Show success message
    showToast(`Launching ${programValue} program...`);
    
    // Here you would add your program launch logic
}
                        // Sample data
                        const sampleData = {
                            projects: [
                                { id: 1, title: "Global SaaS Procurement", status: "In Progress", completion: 75 },
                                { id: 2, title: "Hardware Vendor Consolidation", status: "Review", completion: 45 },
                                { id: 3, title: "EMEA Service Agreements", status: "Planning", completion: 20 },
                                { id: 4, title: "Cloud Infrastructure Deal", status: "Negotiation", completion: 60 }
                            ],
                            metrics: [
                                { title: "Orders Last Quarter", value: "1,247", trend: "+12%" },
                                { title: "Total Spend", value: "$2.8M", trend: "+5%" },
                                { title: "Total Transactions", value: "3,856", trend: "+8%" },
                                { title: "Active Users", value: "245", trend: "+15%" },
                                { title: "Avg. Completion Time", value: "3.2 days", trend: "-10%" }
                            ],
                            flags: [
                                { id: 1, title: "MSA Expiring - ABC Corp", priority: "High", dueDate: "2024-12-01" },
                                { id: 2, title: "Pending Approval - $1M+", priority: "Critical", dueDate: "2024-11-25" },
                                { id: 3, title: "Compliance Review Required", priority: "High", dueDate: "2024-11-30" }
                            ],
                            alerts: [
                                { id: 1, type: "System", message: "Planned maintenance: Dec 1, 2024 - 2AM EST", timestamp: "2024-11-20" },
                                { id: 2, type: "User", message: "New template available: SAAS-MSA-v2", timestamp: "2024-11-19" },
                                { id: 3, type: "System", message: "Quarter-end processing starts in 5 days", timestamp: "2024-11-18" }
                            ]
                        };
                
                    // Populate the dashboard
                        function initializeDashboard() {
                            populateProjects();
                            populateMetrics();
                            populateFlags();
                            populateAlerts();
                        }
                
                        function populateProjects() {
                            const container = document.getElementById('projectsContainer');
                            container.innerHTML = sampleData.projects.map(project => `
                                <div class="project-item">
                                    <div class="project-info">
                                        <h4>${project.title}</h4>
                                        <span class="project-status">${project.status}</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${project.completion}%"></div>
                                    </div>
                                </div>
                            `).join('');
                        }
                
                        function populateMetrics() {
                            const container = document.getElementById('metricsContainer');
                            container.innerHTML = sampleData.metrics.map(metric => `
                                <div class="metric-card">
                                    <div class="metric-header">${metric.title}</div>
                                    <div class="metric-value">${metric.value}</div>
                                    <div class="metric-trend ${metric.trend.startsWith('+') ? 'trend-up' : 'trend-down'}">
                                        ${metric.trend}
                                    </div>
                                </div>
                            `).join('');
                        }
                
                        function populateFlags() {
                            const container = document.getElementById('flagsContainer');
                            container.innerHTML = sampleData.flags.map(flag => `
                                <div class="flag-item">
                                    <div class="flag-header">
                                        <h4>${flag.title}</h4>
                                        <span class="priority-badge">${flag.priority}</span>
                                    </div>
                                    <div>Due: ${flag.dueDate}</div>
                                </div>
                            `).join('');
                        }
                
                        function populateAlerts() {
                            const container = document.getElementById('alertsContainer');
                            container.innerHTML = sampleData.alerts.map(alert => `
                                <div class="alert-item">
                                    <div class="alert-header">
                                        <span class="alert-badge">${alert.type}</span>
                                        <span>${alert.timestamp}</span>
                                    </div>
                                    <div>${alert.message}</div>
                                </div>
                            `).join('');
                        }
                
                        function handleNewRequest() {
                            // Placeholder for request handling
                            alert('Feature request functionality coming soon!');
                        }
                
                        // Initialize the dashboard when the document loads
                        document.addEventListener('DOMContentLoaded', initializeDashboard);
            

        </script> 

</body>
</html>